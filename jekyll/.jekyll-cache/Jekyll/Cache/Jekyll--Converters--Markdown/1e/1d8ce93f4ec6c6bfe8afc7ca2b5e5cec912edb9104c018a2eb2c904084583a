I"≈<p>WebPerformance ist ein schwieriges Thema. Man f√§ngt halt sehr selten auf der gr√ºnen Wiese an. Die meisten Webseiten sind √ºber Jahre gewachsen. Immer mehr Funktionalit√§t ist hinzugekommen und damit ist die Seite auch immer langsamer geworden. Irgendwann liest aber jemand im Marketing oder im Vorstand, das Google schnelle Webseiten besser rankt und dann soll auf einmal alles schnell ‚Äúgemacht‚Äù werden. Am besten √ºber Nacht. Mit einem besseren Google-Ranking bekommt man jeden. ;-)</p>

<p><em>So viel vor Weg: Wenn es einfach w√§re, dann k√∂nnte ich daf√ºr kein <a href="/webperformance">Consulting</a> verkaufen. WebPerformance-Optimierung ist ein Full-Stack-Thema.</em></p>

<p>In diesem Post zeige ich Ihnen die 5 h√§ufigsten Probleme bei deutschen Webseiten und wie sie beseitigt werden k√∂nnen. Ich gehe dabei nicht all zu tief auf die technischen Hintergr√ºnde ein. Wenn Sie sich mehr einlesen wollen, dann empfehle ich Ihnen meinen <a href="http://www.heise.de/ix/inhalt/2015/8/102/">iX-Artikel zu dem Thema WebPerformance</a> und das Buch <a href="https://hpbn.co">High Performance Browser Networking</a>. Bei Fragen k√∂nnen Sie mir gerne eine E-Mail an sw@wintermeyer-consulting.de schreiben oder mich unter Tel. 0261-9886803 anrufen.</p>

<h3 id="webserver-in-frankfurt">Webserver in Frankfurt</h3>

<p>Man soll es nicht glauben, aber die Netzwerkdistanz vom Webserver zum Browser ist wichtig. Das liegt haupts√§chlich am TCP-Slow-Start und daran, das Lichtgeschwindigkeit ‚Äúnur‚Äù 299.792.458 m/s schnell ist. Eine Webseite von einem (billigen?) Webserver in den USA l√§dt immer langsamer als die gleiche Webseite von einem Server in Deutschland. Und wenn wir von Deutschland sprechen, dann sprechen wir von Frankfurt. Da l√§uft alles zusammen und es liegt f√ºr Deutschland netzwerktechnisch in der Mitte.</p>

<p>Ach ja, bitte testen Sie Ihre Webseiten nicht nur vom und im Intranet. Da sind die Netzwerkstrecken besonders kurz. Das verf√§lscht den Eindruck. Extrem!</p>

<h3 id="http2">HTTP/2</h3>

<p>Die meisten deutschen Webseiten werden noch mit dem HTTP/1.1 Protokoll ausgeliefert. Das hat uns sicherlich viele Jahr gute Dienste geleistet, aber heute will man Webseiten mit dem HTTP/2 Protokoll ausliefern. Alleine diese Umstellung f√ºhrt im Schnitt zu 20% schnelleren Webseiten.</p>

<p>Nach der Umstellung muss man das aber dann auch regelm√§ssig auf den wichtigsten Browsern testen. Ich kenne Firmen, die schon vor langer Zeit auf HTTP/2 umgestellt haben, dann hat sich aber was im Chrome-Browser ge√§ndert (lange Geschichte) und auf einmal war die Seite vom Chrome nur noch per HTTP/1.1 erreichbar. Hat nat√ºrlich keiner gemerkt.</p>

<p>Streber k√∂nnen √ºbrigens auch <a href="https://www.chromium.org/quic">QUIC</a> installieren. Da muss man sich aber schon sehr gut mit dem Betriebssystem, der Firewall und dem Webserver auskennen.</p>

<h3 id="cdns-oder-etwa-doch-nicht">CDNs oder etwa doch nicht?</h3>

<p>Jahrelang hat man gesagt, das das Ausliefern von Grafiken via externem CDNs wichtig f√ºr eine gute WebPerformance sind. Stimmt das etwas nicht mehr? Nein, es stimmt nicht mehr. Wenn Sie eine Webseite via HTTP/2 ausliefern, dann ist es immer besser <strong>alle</strong> Elemente dieser Webseite auch vom gleichen Server (also der schon offenen TCP-Verbindung) auszuliefern.</p>

<p>CDNs machen nur bei der Verwendung von HTTP/1.1 Sinn. Und das wollen wir ja nicht mehr, weil eh langsamer.</p>

<p>Ausnahme 1: Wenn Ihre Kunden weltweit auf Ihre Webseite zugreifen und sie nur einen Webserver (egal ob geclustert oder nicht) haben. Dann kann die Verwendung eines guten CDNs (z.B. <a href="https://www.fastly.com">fastly.com</a>) Sinn machen, um die Distanz vom Browser zum Server (dann dem CDN als Proxy) zu verk√ºrzen. Wenn Sie aber haupts√§chlich von Zugriffen aus Deutschland und DACH leben, dann stellen Sie auf HTTP/2 um und k√ºndigen Sie Ihr CDN. Geld gespart und schnellere Webseite!</p>

<p>Ausnahme 2: Sollten Sie zu einem bestimmten Zeitpunkt mehrere Millionen Zugriffe bekommen, weil Sie z.B. eine neue Software zum Download anbieten, dann kann ein CDN eine gro√üe Hilfe zur Vermeidung eines DOS sein.</p>

<h3 id="grafiken">Grafiken</h3>

<p>Es wird keinen verwundern, das eine kleine Grafik schnelle √ºbertragen wird, als eine gro√üe Grafik. Und doch werden auf den aller wenigsten Webseiten die Grafiken optimal ausgeliefert.</p>

<ul>
  <li>Wenn die Grafik mit 100x100 Pixeln angezeigt wird, dann muss man sie nicht mit 200x200 Pixeln ausliefern. Das ist Bandbreitenverschwendung und verbraucht unn√∂tig CPU-Leistung auf dem Browser (gerade bei Handys ein Thema).</li>
  <li>Ob JPEG, PNG oder GIF ist eigentlich egal. Hauptsache man versteht die Vor- und Nachteile der jeweiligen Formate und benutzt immer das ideale Format. Falls man gar nicht weiter wei√ü, exportiert man ein Bild in alle drei Formate und schaut sie sich dann an.</li>
  <li>Auf jeden Fall ist immer ein Besuch von <a href="https://kraken.io">kraken.io</a> oder √§hnlichen Webseiten sinnvoll. Dort kann man Grafiken automatisch optimieren lassen. Nat√ºrlich kann jemand, der viel Ahnung von der Materie hat, das in Handarbeit noch besser, aber so ein Server ist eine gute 80% L√∂sung und besser als gar nichts.</li>
</ul>

<p>Ich wei√ü wie trival das Thema daher kommt. Aber bis jetzt habe ich noch bei jedem neuen WebPerformance-Kunden Optimierungsm√∂glichkeiten bei Grafiken gefunden.</p>

<h3 id="schriften">Schriften</h3>

<p>Sie kennen das: Man l√§dt eine Webseiten und nach 1-3 Sekunden ver√§ndert sich die Schrift und das Layout. Alles ruckelt. So was nervt und es f√ºhrt zu einer schlechteren WebPerformance. So bald Sie eine externe Schrift laden, verschlechtern Sie die Ladezeit der Webseite! Die meisten Webseiten k√∂nnen auch mit den bereits im Browser verf√ºgbaren Schriften sehr gut dargestellt werden.</p>

<h3 id="weniger-ist-mehr--√§h--schneller">Weniger ist mehr ‚Ä¶ √§h, ‚Ä¶ schneller</h3>

<p>Egal ob HTML, CSS, Schriften oder JavaScript. Je weniger sie ausliefern, desto schneller wird diese Payload ausgeliefert und desto weniger Arbeit hat der Browser mit der Webseite. Das muss vom Browser alles gerendet werden. Das JavaScript muss kompiliert werden. Das dauert alles und summiert sich. <strong>Kleinvieh macht bei der WebPerformance verdammt viel Mist.</strong></p>

<p>Diese Seite ist komprimiert weniger als 28 KB gro√ü und damit schnell ausgeliefert. Warum 28 KB? 1460 * 20 / 1024 sind ungef√§hr 28. Das ist die maximale Kapazit√§t des zweiten TCP-Paketes auf dieser Verbindung. Das erste Paket wird f√ºr den SSL-Schl√ºssel benutzt. Aber jetzt werde ich doch wieder zu technisch.</p>

<p>Wichtig: Was nicht unbedingt gebraucht wird, muss raus.</p>

<h3 id="was-ist-mit-amp">Was ist mit AMP?</h3>

<p>Jetzt habe ich die wichtigsten 5 Punkte schon abgearbeitet. <a href="https://www.ampproject.org">AMP</a> ist ein komplexes Thema. Das werde ich in einem extra Posting behandeln.</p>

<h2 id="wie-teste-ich-die-webperformance">Wie teste ich die WebPerformance?</h2>

<p>Sehr gute Frage! Die wirkliche Performance k√∂nnen Sie nicht mit dem Entwicklungs-System oder mit Staging testen. Das sind alles erste wichtige Schritte, aber am Ende des Tages, m√ºssen Sie die Performance auf Ihrem Produktionssystem testen. Am allerbesten mal LTE auf dem Handy ausschalten, den Cache leeren und dann schauen wie langsam oder schnell die Webseite auf dem Handy l√§dt.</p>

<p>Wenn Sie etwas tiefer einsteigen wollen, empfehle ich Ihnen die Webseite einmal mit <a href="https://www.webpagetest.org">webpagetest.org</a> zu testen.</p>

<p><strong>Achtung:</strong> Der gr√∂√üte Fehler ist ein lokaler Test mit einem gef√ºllten Cache im Browser. Damit ist jede Webseite schneller. Zum Thema Cache werden ich auch mal was posten. Das ist aber ein eigenes gro√ües Thema.</p>

<h2 id="ich-das-alles">Ich das alles?</h2>

<p>Nein, aber es ist ein Anfang. Damit k√∂nnen Sie Ihre Webseite schon mal ein gutes St√ºck schneller machen. Im Schnitt hat bringt jede Sekunde schnellere Ladezeit ein 5%ig Verbesserung in der Conversion-Rate.</p>

<p><strong>Bonus:</strong> Ein besseres Google-Ranking!</p>
:ET